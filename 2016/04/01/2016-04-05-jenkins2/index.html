<!DOCTYPE html>
<html >
<head>
  <meta charset="utf-8">
  
  <title>iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2) | New World</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)Jenkins ç³»ç»Ÿè®¾ç½® å‰æœŸå‡†å¤‡">
<meta property="og:type" content="article">
<meta property="og:title" content="iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)">
<meta property="og:url" content="https://runningyoung.github.io/2016/04/01/2016-04-05-jenkins2/index.html">
<meta property="og:site_name" content="New World">
<meta property="og:description" content="iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)Jenkins ç³»ç»Ÿè®¾ç½® å‰æœŸå‡†å¤‡">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/login1.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/login2.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/lang.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/location.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/email.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/createjob1.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/name.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/ssh.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/git.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/gitlabhook.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/jenkinsgitlabhook.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/pod.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/codesigning.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/xcodebuild.png">
<meta property="og:image" content="https://runningyoung.github.io/../images/jenkins/pgy.png">
<meta property="og:updated_time" content="2016-04-12T03:44:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)">
<meta name="twitter:description" content="iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)Jenkins ç³»ç»Ÿè®¾ç½® å‰æœŸå‡†å¤‡">
<meta name="twitter:image" content="https://runningyoung.github.io/../images/jenkins/login1.png">
  
    <link rel="alternative" href="/atom.xml" title="New World" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/avatar.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  
  
      <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
      <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/style.css">
  
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false,
      }
  </script>

  
      <script>
          yiliaConfig.rootUrl = "/";
      </script>
  

  

  
      <script>
          var _hmt = _hmt || [];
          (function() {
              var hm = document.createElement("script");
              hm.src = "//hm.baidu.com/hm.js?200c79969158a0fa1fe0632060fe4221";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
          })();
      </script>
  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">RunningYoung</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Steadfast some, don&#39;t try so hard, what you want, time will give yo  qqäº¤æµç¾¤ï¼š114803643ï¼ŒCSDNåšå®¢é“¾æ¥:http://blog.csdn.net/liangliang103377</p>
        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">ä¸»é¡µ</a></li>
                        
                            <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                        
                            <li><a href="/tags/">æ ‡ç­¾äº‘</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/RunningYoung" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/BDD/" style="font-size: 10px;">BDD</a> <a href="/tags/Block/" style="font-size: 10px;">Block</a> <a href="/tags/Phabricator/" style="font-size: 20px;">Phabricator</a> <a href="/tags/ReactiveCocoa/" style="font-size: 10px;">ReactiveCocoa</a> <a href="/tags/dependency-injection/" style="font-size: 10px;">dependency injection</a> <a href="/tags/ios-9-æ–°æŠ€æœ¯/" style="font-size: 10px;">ios 9 æ–°æŠ€æœ¯</a> <a href="/tags/jenkins/" style="font-size: 20px;">jenkins</a> <a href="/tags/å·¥å…·ç±»/" style="font-size: 10px;">å·¥å…·ç±»</a> <a href="/tags/è¯»ä¹¦ç¬”è®°/" style="font-size: 10px;">è¯»ä¹¦ç¬”è®°</a>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">ä¸“æ³¨äºiOSå¼€å‘</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="å›åˆ°ä¸»é¡µ">RunningYoung</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="å›åˆ°ä¸»é¡µ">RunningYoung</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Steadfast some, don&#39;t try so hard, what you want, time will give yo  qqäº¤æµç¾¤ï¼š114803643ï¼ŒCSDNåšå®¢é“¾æ¥:http://blog.csdn.net/liangliang103377</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">ä¸»é¡µ</a></li>
                
                    <li><a href="/archives/">æ‰€æœ‰æ–‡ç« </a></li>
                
                    <li><a href="/tags/">æ ‡ç­¾äº‘</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/RunningYoung" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-2016-04-05-jenkins2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/01/2016-04-05-jenkins2/" class="article-date">
      <time datetime="2016-04-01T03:40:13.000Z" itemprop="datePublished">2016-04-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/">jenkins</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="iOSæŒç»­é›†æˆï¼šjenkins-gitlab-è’²å…¬è‹±-é‚®ä»¶é€šçŸ¥-Part-2"><a href="#iOSæŒç»­é›†æˆï¼šjenkins-gitlab-è’²å…¬è‹±-é‚®ä»¶é€šçŸ¥-Part-2" class="headerlink" title="iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)"></a>iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)</h1><h2 id="Jenkins-ç³»ç»Ÿè®¾ç½®-å‰æœŸå‡†å¤‡"><a href="#Jenkins-ç³»ç»Ÿè®¾ç½®-å‰æœŸå‡†å¤‡" class="headerlink" title="Jenkins ç³»ç»Ÿè®¾ç½® å‰æœŸå‡†å¤‡"></a>Jenkins ç³»ç»Ÿè®¾ç½® å‰æœŸå‡†å¤‡</h2><a id="more"></a>
<h3 id="Jenkins-æ’ä»¶å®‰è£…"><a href="#Jenkins-æ’ä»¶å®‰è£…" class="headerlink" title="Jenkins æ’ä»¶å®‰è£…"></a>Jenkins æ’ä»¶å®‰è£…</h3><ul>
<li><p>å®‰è£…GitLabæ’ä»¶</p>
<pre><code>å› ä¸ºæˆ‘ä»¬é¡¹ç›®ç”¨çš„æ˜¯GitLabæ¥ç®¡ç†æºä»£ç ï¼Œjenkinsæœ¬èº«å¹¶æ²¡æœ‰è‡ªå¸¦GitLabæ’ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¾æ¬¡é€‰æ‹© ***ç³»ç»Ÿç®¡ç† -&gt; ç®¡ç†æ’ä»¶*** åœ¨&quot;***å¯é€‰æ’ä»¶***&quot;ä¸­é€‰æ‹©GitLab Plugin å’Œ Gitlab Hook Plugin è¿™ä¸¤é¡¹ï¼Œç„¶åå®‰è£…
</code></pre></li>
<li><p>å®‰è£…Xcodeæ’ä»¶<br>åŒå®‰è£…GitLabæ’ä»¶æ­¥éª¤ä¸€æ ·ï¼Œæˆ‘ä»¬ä¸€æ¬¡é€‰æ‹©  <strong><em>ç³»ç»Ÿç®¡ç† -&gt; ç®¡ç†æ’ä»¶</em></strong> åœ¨â€<strong><em>å¯é€‰æ’ä»¶</em></strong>â€œä¸­é€‰æ‹©Xcode integrationè¿™ä¸¤é¡¹ï¼Œç„¶åå®‰è£…</p>
</li>
<li><p>å®‰è£…ç­¾åè¯ä¹¦ç®¡ç†æ’ä»¶<br>   iOSæ‰“åŒ…å†…æµ‹ç‰ˆæ—¶ï¼Œéœ€è¦å‘å¸ƒè¯ä¹¦åŠç›¸å…³ç­¾åæ–‡ä»¶ï¼Œå› æ­¤è¿™ä¸¤ä¸ªæ’ä»¶å¯¹äºç®¡ç†iOSè¯ä¹¦éå¸¸æ–¹ä¾¿ã€‚è¿˜æ˜¯åœ¨<strong><em>ç³»ç»Ÿç®¡ç†-&gt;ç®¡ç†æ’ä»¶</em></strong>ï¼Œåœ¨â€œ<strong><em>å¯é€‰æ’ä»¶</em></strong>â€ä¸­é€‰ä¸­â€œCredentials Pluginâ€å’Œâ€œKeychains and Provisioning Profiles Managementâ€å®‰è£…ã€‚</p>
<ul>
<li><p>å®‰è£…FTPæ’ä»¶<br>æ­¤æ’ä»¶å¯ç”¨äºä¸Šä¼ FTPæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ä¸Šä¼ åˆ°å…¬å¸å†…ç½‘çš„FTPæœåŠ¡å™¨ä¸­ã€‚â€Publish over FTPâ€</p>
</li>
<li><p>å®‰è£…è„šæœ¬æ’ä»¶<br>è¿™ä¸ªæ’ä»¶ä¸»è¦ç”¨äºbuildåæ‰§è¡Œå…ˆå…³è„šæœ¬.â€Publish over FTPâ€</p>
</li>
</ul>
</li>
</ul>
<h3 id="jenkins-ç³»ç»Ÿé…ç½®"><a href="#jenkins-ç³»ç»Ÿé…ç½®" class="headerlink" title="jenkins ç³»ç»Ÿé…ç½®"></a>jenkins ç³»ç»Ÿé…ç½®</h3><h4 id="jenkins-å®‰å…¨è®¾ç½®ï¼šæ³¨å†Œï¼Œç™»å½•"><a href="#jenkins-å®‰å…¨è®¾ç½®ï¼šæ³¨å†Œï¼Œç™»å½•" class="headerlink" title="jenkins å®‰å…¨è®¾ç½®ï¼šæ³¨å†Œï¼Œç™»å½•"></a>jenkins å®‰å…¨è®¾ç½®ï¼šæ³¨å†Œï¼Œç™»å½•</h4><p> è¿›å…¥ <strong><em>ç³»ç»Ÿç®¡ç†-&gt;Configure Global Security</em></strong> é¦–æ¬¡è®¾ç½®å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p> <img src="../images/jenkins/login1.png" alt="é¦–æ¬¡è®¾ç½®"></p>
<p> é¦–æ¬¡è®¾ç½®å®Œç‚¹å‡»ä¿å­˜ï¼Œç„¶åç‚¹å‡»æ³¨å†Œ-&gt;ç™»å½•è´¦å·ï¼Œåœ¨è¿›å…¥è¯¥ç•Œé¢è¿›è¡Œè´¦å·æƒé™è®¾ç½®ï¼Œå¦‚å›¾</p>
<p>  <img src="../images/jenkins/login2.png" alt="æƒé™è®¾ç½®"></p>
<h4 id="jenkins-ç³»ç»Ÿè®¾ç½®"><a href="#jenkins-ç³»ç»Ÿè®¾ç½®" class="headerlink" title="jenkins ç³»ç»Ÿè®¾ç½®"></a>jenkins ç³»ç»Ÿè®¾ç½®</h4><p>è¿›å…¥ <strong><em>ç³»ç»Ÿç®¡ç†-&gt;ç³»ç»Ÿè®¾ç½®</em></strong> ç•Œé¢ï¼š</p>
<ul>
<li><p>é¦–å…ˆè®¾ç½®ä¸€ä¸‹ jenkins å†…éƒ¨shell æ‰§è¡Œç¼–ç ï¼Œç›®çš„å½“åœ¨jenkinsæ‰§è¡Œshellå‘½ä»¤æ—¶ï¼Œæœ‰æ—¶å€™ä¼šæŠ¥ utf-8 ç¼–ç é”™è¯¯ã€‚ä¸»è¦æ˜¯pod installçš„æ—¶å€™æŠ¥é”™ã€‚</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[33mWARNING: CocoaPods requires your terminal to be using UTF-8 encoding.</span><br></pre></td></tr></table></figure>
<p>  è®¾ç½®å¦‚ä¸‹ï¼š</p>
<p>  <img src="../images/jenkins/lang.png" alt="ç¼–ç è®¾ç½®"></p>
</li>
<li><p>jenkins Location è®¾ç½®<br>ä¸»è¦è®¾ç½® jenkins å¤–éƒ¨è®¿é—®çš„URL å’Œ ç³»ç»Ÿç®¡ç†å‘˜çš„é‚®ç®±åœ°å€ã€‚ç”¨æ¥å‘é€ é”™è¯¯æŠ¥å‘Šçš„é‚®ç®±åœ°å€ï¼šå¦‚å›¾</p>
<p><img src="../images/jenkins/location.png" alt="urlè®¾ç½®"></p>
</li>
<li><p>ç³»ç»Ÿé”™è¯¯æŠ¥å‘Šçš„é‚®ç®±è®¾ç½®ï¼Œä¸Šé¢åªè®¾ç½®äº†é‚®ç®±å‘é€çš„åœ°å€ï¼ˆFromåœ°å€ï¼‰ï¼Œä¸‹é¢è®¾ç½®ï¼Œé‚®ç®±çš„æœåŠ¡å™¨ï¼Œåè®®ï¼Œé‚®ç®±ï¼Œå¯†ç ã€‚å¦‚å›¾</p>
<p>   <img src="../images/jenkins/email.png" alt="emailè®¾ç½®"></p>
</li>
</ul>
<h2 id="Jenkins-ä»»åŠ¡ï¼ˆJobsï¼‰æ­å»º"><a href="#Jenkins-ä»»åŠ¡ï¼ˆJobsï¼‰æ­å»º" class="headerlink" title="Jenkins ä»»åŠ¡ï¼ˆJobsï¼‰æ­å»º"></a>Jenkins ä»»åŠ¡ï¼ˆJobsï¼‰æ­å»º</h2><h3 id="æ–°å»ºä»»åŠ¡-job"><a href="#æ–°å»ºä»»åŠ¡-job" class="headerlink" title="æ–°å»ºä»»åŠ¡ job"></a>æ–°å»ºä»»åŠ¡ job</h3><p>  åœ¨Jenkinsä¸­ï¼Œæ‰€æœ‰çš„ä»»åŠ¡éƒ½æ˜¯ä»¥â€œitemâ€ä¸ºå•ä½çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ–°å»ºä¸€ä¸ªiOSçš„é¡¹ç›®æ¥å¼€å§‹è‡ªåŠ¨åŒ–æ„å»ºã€‚ç‚¹å‡»â€œæ–°å»ºâ€ï¼Œè¾“å…¥itemçš„åç§°ï¼Œé€‰æ‹©â€œæ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®â€ï¼Œç„¶åç‚¹å‡»â€œOKâ€ã€‚å¦‚å›¾ï¼š</p>
<p>  <img src="../images/jenkins/createjob1.png" alt="æ–°å»ºJobè®¾ç½®"></p>
<p> è®¾ç½®æ„å»ºä¿¡æ¯</p>
<p> <img src="../images/jenkins/name.png" alt="æ„å»ºä¿¡æ¯è®¾ç½®"></p>
<h3 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h3><p>è¿™é‡Œç”¨åˆ°çš„æ˜¯GitLabï¼Œå…ˆéœ€è¦é…ç½®SSHï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Jenkinsçš„è¯ä¹¦ç®¡ç†ä¸­æ·»åŠ SSHã€‚åœ¨Jenkinsç®¡ç†é¡µé¢ï¼Œé€‰æ‹©â€œCredentialsâ€ï¼Œç„¶åé€‰æ‹©â€œGlobal credentials (unrestricted)â€ï¼Œç‚¹å‡»â€œAdd Credentialsâ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¡«å†™è‡ªå·±çš„SSHä¿¡æ¯ï¼Œç„¶åç‚¹å‡»â€œSaveâ€ï¼Œè¿™æ ·å°±æŠŠSSHæ·»åŠ åˆ°Jenkinsçš„å…¨å±€åŸŸä¸­å»äº†ã€‚<br>è¿™è¾¹éœ€è¦æ³¨æ„çš„æ˜¯å¦‚ä½•è·å–SSH keyï¼šè¿™ä¸ªé—®é¢˜éœ€è¦å‚è€ƒ gitLab ä¸Šé…ç½®SSH çš„æ–¹æ³•ã€‚</p>
<ol>
<li>æŸ¥çœ‹æ˜¯å¦å·²ç»æœ‰äº†sshå¯†é’¥ï¼šcd ~/.sshï¼Œå¦‚æœæ²¡æœ‰å¯†é’¥åˆ™ä¸ä¼šæœ‰æ­¤æ–‡ä»¶å¤¹ï¼Œæœ‰åˆ™å¤‡ä»½åˆ é™¤</li>
<li>ç”Ÿæˆå¯†é’¥ï¼š<code>$ ssh-keygen -t rsa -C â€œhaiyan.xu.vip@gmail.comâ€</code> ç”Ÿæˆè¿‡ç¨‹ä¸­å¿…é¡»è®¾ç½®ç§˜é’¥å¯†ç  å¦åˆ™jenkins è®¾ç½®ä¼šä¸æˆåŠŸã€‚æœ€åå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼šid_rsaå’Œid_rsa.pub</li>
<li>æ·»åŠ å¯†é’¥åˆ°SSH ï¼š<code>ssh-add æ–‡ä»¶å</code> éœ€è¦è¾“å…¥ç®¡ç†å¯†ç </li>
<li>åœ¨gitlab ä¸Šæ·»åŠ  ssh å¯†é’¥ï¼Œè¿™é‡Œæ·»åŠ çš„æ˜¯ â€œid_rsa.pubâ€é‡Œé¢çš„å…¬é’¥ã€‚</li>
<li>åœ¨jenkinsä¸Šé…ç½®å¯†é’¥åˆ°SSH ï¼Œè¿™é‡Œæ·»åŠ çš„æ˜¯id_rsaé‡Œé¢çš„ç§é’¥ã€‚å…·ä½“è®¾ç½®å¦‚å›¾æ‰€ç¤ºï¼š</li>
</ol>
<p><img src="../images/jenkins/ssh.png" alt=""></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†å›åˆ°åˆšåˆšæ–°å»ºçš„ä»»åŠ¡ä¸­ï¼Œåœ¨æºç ç®¡ç†ä¸­ï¼Œé€‰æ‹©Gitï¼ŒæŒ‰ä¸‹å›¾å¡«å¥½ç›¸å…³ä¿¡æ¯ã€‚PSï¼šCredentialsä¸éœ€è¦é€‰æ‹©ã€‚å¦‚å›¾</p>
<p><img src="../images/jenkins/git.png" alt=""></p>
<h3 id="æ„å»ºè§¦å‘å™¨è®¾ç½®"><a href="#æ„å»ºè§¦å‘å™¨è®¾ç½®" class="headerlink" title="æ„å»ºè§¦å‘å™¨è®¾ç½®"></a>æ„å»ºè§¦å‘å™¨è®¾ç½®</h3><p>è¯¥è®¾ç½®ä¸»è¦æ˜¯ä¸ºäº†å®ç°è‡ªåŠ¨è§¦å‘ jenkins æ„å»ºè¿‡ç¨‹ çœŸæ­£å®ç°è‡ªåŠ¨åŒ–è®¾ç½®:<br>è¿™è¾¹ä¸»è¦å¤„ç†çš„æ˜¯ <strong><em>gitlab hook</em></strong> çš„è®¾ç½®ã€‚ä¸»è¦ç›®çš„æ˜¯å½“é¡¹ç›®ä¸­æœ‰äººgit push æäº¤è¿‡ä»£ç ä¹‹åï¼Œå°±ä¼šè‡ªåŠ¨çš„è§¦å‘ jenkins çš„æœ¬Jobçš„æ„å»ºï¼Œå®ç°è‡ªåŠ¨åŒ–æ‰“åŒ…ã€‚</p>
<ol>
<li>é¦–é€‰éœ€è¦åœ¨gitlab é¡¹ç›®ç®¡ç†å®˜ç½‘ä¸Šè®¾ç½® æ·»åŠ git hook çš„åœ°å€ï¼šå¦‚å›¾ï¼šè¯¥åœ°å€æ˜¯jenkins ä¸Š æç¤ºçš„åœ°å€ ä¸‹é¢ä¼šæåˆ°</li>
</ol>
<p><img src="../images/jenkins/gitlabhook.png" alt=""></p>
<ol>
<li>jenkins ä¸Šå¯¹ gitlab hook è¿›è¡Œç›¸å…³é…ç½® å¦‚å›¾æ‰€ç¤ºï¼š</li>
</ol>
<p><img src="../images/jenkins/jenkinsgitlabhook.png" alt=""></p>
<h3 id="æ„å»ºç¯å¢ƒ"><a href="#æ„å»ºç¯å¢ƒ" class="headerlink" title="æ„å»ºç¯å¢ƒ"></a>æ„å»ºç¯å¢ƒ</h3><p>åœ¨è¯¥æ¨¡å—ä¸­ ä¸»è¦è®¾ç½® xcode build æ‰“åŒ…æ—¶éœ€è¦çš„ keychains å’Œ Provision Profiles é…ç½®æ–‡ä»¶ã€‚<br>å¦‚æœä¸é…ç½® å°±ä¼šä½¿ç”¨ xcode è‡ªåŠ¨çš„é…ç½®ï¼Œæ¥å»ç³»ç»Ÿä¸­æŸ¥æ‰¾ç›¸åº”çš„é…ç½®ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„,å°±æ˜¯é’¥åŒ™ä¸²ä¸­ï¼Œç™»é™†é’¥åŒ™ä¸²ä¸­çš„è¯ä¹¦ è¦å¤åˆ¶åˆ° ç³»ç»Ÿé’¥åŒ™ä¸²ä¸­ï¼Œå› ä¸ºjenkins è®¿é—®çš„æ˜¯ç³»ç»Ÿä¸­çš„é’¥åŒ™ä¸² è¿™æ ·åœ¨ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šæç¤º æ˜¯å¦æˆæƒè®¿é—®é’¥åŒ™ä¸²ï¼Œç‚¹å‡»å§‹ç»ˆå…è®¸å°±å¯ä»¥äº†ã€‚<br>æ³¨æ„ï¼šåœ¨ç”µè„‘ä¸Šå®‰è£…å¥½ xcode é…ç½®ç›¸å…³çš„è¯ä¹¦å’Œé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¹Ÿè¦å®‰è£…åˆ°ç³»ç»Ÿç›®å½•ä¸‹ã€‚<br>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼šä»è¯¥ç”¨æˆ·ç›®å½•ä¸‹çš„æ‰€æœ‰æè¿°æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/ç”¨æˆ·å/Library/MobileDevice/Provisioning Profiles</span><br></pre></td></tr></table></figure>
<p>å¤åˆ¶åˆ°ç³»ç»Ÿç›®å½•ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Library/MobileDevice/Provisioning Profiles</span><br></pre></td></tr></table></figure>
<h3 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h3><p>è¯¥æ¨¡å—å¼€å§‹è®¾ç½® iOSæ‰“åŒ…ç›¸å…³çš„é…ç½®ã€‚</p>
<ol>
<li><p>ç‚¹å‡»å¢åŠ æ„å»ºæ­¥éª¤-&gt; Execute Shell .é¦–å…ˆ åœ¨build ä¹‹å‰éœ€è¦å…ˆ pod install ï¼Œå¹¶ä¸”æœ€ç†æƒ³çš„æƒ…å†µæ˜¯æ¯æ¬¡æ„å»ºçš„æ—¶å€™ buildå·éƒ½æ”¹å˜ã€‚å¦‚å›¾æ‰€ç¤º<br> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨å…¨å±€å˜é‡æ—¶ å¿…é¡»æ‰¾åˆ°ç»å¯¹è·¯å¾„æ‰èƒ½è°ƒç”¨ç›¸å…³çš„å‘½ä»¤ï¼šç‰ˆæœ¬å·å¢åŠ <a href="https://www.5288z.com/?p=1651" target="_blank" rel="external">å‚è€ƒé“¾æ¥</a></p>
<p> <img src="../images/jenkins/pod.png" alt=""></p>
</li>
<li><p>ç‚¹å‡»å¢åŠ æ„å»ºæ­¥éª¤ xcode ï¼Œå…·ä½“é…ç½®å¦‚å›¾ï¼š<br>  è¯¥é…ç½®ä¸­éœ€è¦æ³¨æ„ åœ¨OS X 10.10.XXç‰ˆæœ¬ jenkins xcode æ’ä»¶ä¸æ”¯æŒ ç”Ÿæˆipaæ–‡ä»¶ï¼Œä½† OS X 10.11 æ”¯æŒ è¿™ä¸ªæ—¶å€™ éœ€è¦æ‰‹åŠ¨è¿›è¡Œæ‰“åŒ…ï¼Œå…·ä½“çš„å°±æ˜¯åœ¨build å®Œæˆä¹‹å æ·»åŠ EXecute Shell ï¼Œåˆ©ç”¨shellè„šæœ¬æ‰“åŒ…ï¼šä»£ç å¦‚ä¸‹ï¼š</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun -sdk iphones PackageApplication -v [å·¥ç¨‹ç›®å½•] -o [ipaè¾“å‡ºç›®å½•]/xx.ipa</span><br></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>![](../images/jenkins/xcode.png)
</code></pre><ol>
<li><p>Code signing &amp; OS X keychain options é…ç½®ï¼šå¦‚å›¾</p>
<p><img src="../images/jenkins/codesigning.png" alt=""></p>
</li>
<li><p>Advanced Xcode build options é…ç½®ï¼šå¦‚å›¾</p>
<p>  <img src="../images/jenkins/xcodebuild.png" alt=""></p>
</li>
</ol>
<h3 id="æ„å»ºåæ“ä½œ"><a href="#æ„å»ºåæ“ä½œ" class="headerlink" title="æ„å»ºåæ“ä½œ"></a>æ„å»ºåæ“ä½œ</h3><p> æ‰“åŒ…å®Œæˆä¹‹å éœ€è¦æ‰§è¡Œ ä¸Šä¼ åˆ°è’²å…¬è‹± å’Œ å‘é€é‚®ä»¶ é€šçŸ¥å¼€å‘äººå‘˜ã€‚<br>   å…·ä½“æ“ä½œæˆ‘ç”¨pythonå†™çš„è„šæœ¬æ¥å®Œæˆæ­¤åŠŸèƒ½ï¼šéœ€è¦çš„ç«¥é‹å¯ä»¥å»githubä¸Šä¸‹è½½ï¼šåœ¨æ–‡ç« æœ€åï¼ï¼<br>   å…·ä½“è°ƒç”¨å¦‚å›¾ï¼š</p>
<p><img src="../images/jenkins/pgy.png" alt=""></p>
<p>  æœ€åè®¾ç½® é€šçŸ¥é‚®ä»¶ E-mail Notification å¡«å†™æ¥å—é‚®ç®±å³å¯ æ¯æ¬¡æ„å»ºå¤±è´¥éƒ½ä¼šå‘ç”Ÿé‚®ä»¶é€šçŸ¥ï¼ï¼ï¼</p>
<p> <a href="https://github.com/RunningYoung/jenkins-pgy-python" target="_blank" rel="external">python è„šæœ¬åœ°å€</a>!!! ä¸è¦åå•¬ starï¼ï¼ï¼ä¸èƒœæ„Ÿæ¿€ï¼ï¼ï¼ </p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2016/04/01/2016-04-05-jenkins2/">iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)</a></p>
        <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="å›åˆ°ä¸»é¡µ">RunningYoung</a></p>
        <p><span>å‘å¸ƒæ—¶é—´:</span>2016-04-01, 11:40:13</p>
        <p><span>æœ€åæ›´æ–°:</span>2016-04-12, 11:44:51</p>
        <p>
            <span>åŸå§‹é“¾æ¥:</span><a class="post-url" href="/2016/04/01/2016-04-05-jenkins2/" title="iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)">https://runningyoung.github.io/2016/04/01/2016-04-05-jenkins2/</a>
            <span class="copy-path" data-clipboard-text="åŸæ–‡: https://runningyoung.github.io/2016/04/01/2016-04-05-jenkins2/ã€€ã€€ä½œè€…: RunningYoung" title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"ç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0"</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/04/06/hello-world/">
                    Hello World
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/04/01/2016-04-01-jenkins1/">
                    iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 1)
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#iOSæŒç»­é›†æˆï¼šjenkins-gitlab-è’²å…¬è‹±-é‚®ä»¶é€šçŸ¥-Part-2"><span class="toc-number">1.</span> <span class="toc-text">iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Jenkins-ç³»ç»Ÿè®¾ç½®-å‰æœŸå‡†å¤‡"><span class="toc-number">1.1.</span> <span class="toc-text">Jenkins ç³»ç»Ÿè®¾ç½® å‰æœŸå‡†å¤‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Jenkins-æ’ä»¶å®‰è£…"><span class="toc-number">1.1.1.</span> <span class="toc-text">Jenkins æ’ä»¶å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jenkins-ç³»ç»Ÿé…ç½®"><span class="toc-number">1.1.2.</span> <span class="toc-text">jenkins ç³»ç»Ÿé…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#jenkins-å®‰å…¨è®¾ç½®ï¼šæ³¨å†Œï¼Œç™»å½•"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">jenkins å®‰å…¨è®¾ç½®ï¼šæ³¨å†Œï¼Œç™»å½•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jenkins-ç³»ç»Ÿè®¾ç½®"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">jenkins ç³»ç»Ÿè®¾ç½®</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Jenkins-ä»»åŠ¡ï¼ˆJobsï¼‰æ­å»º"><span class="toc-number">1.2.</span> <span class="toc-text">Jenkins ä»»åŠ¡ï¼ˆJobsï¼‰æ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–°å»ºä»»åŠ¡-job"><span class="toc-number">1.2.1.</span> <span class="toc-text">æ–°å»ºä»»åŠ¡ job</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æºç ç®¡ç†"><span class="toc-number">1.2.2.</span> <span class="toc-text">æºç ç®¡ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„å»ºè§¦å‘å™¨è®¾ç½®"><span class="toc-number">1.2.3.</span> <span class="toc-text">æ„å»ºè§¦å‘å™¨è®¾ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„å»ºç¯å¢ƒ"><span class="toc-number">1.2.4.</span> <span class="toc-text">æ„å»ºç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„å»º"><span class="toc-number">1.2.5.</span> <span class="toc-text">æ„å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„å»ºåæ“ä½œ"><span class="toc-number">1.2.6.</span> <span class="toc-text">æ„å»ºåæ“ä½œ</span></a></li></ol></li></ol></li></ol>
</div>
<style>
    .left-col .switch-btn {
        display: none;
    }
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="éšè—ç›®å½•"  title="ç‚¹å‡»æŒ‰é’®éšè—æˆ–è€…æ˜¾ç¤ºæ–‡ç« ç›®å½•">
<script>
    var valueHide = "éšè—ç›®å½•";
    var valueShow = "æ˜¾ç¤ºç›®å½•";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }

    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
            $(".switch-btn, .switch-area").fadeOut(300);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
            $(".switch-btn, .switch-area").fadeIn(500);
        }
    })

    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
        $(".switch-btn, .switch-area").show();
    }
</script>







    
        <section id="comments">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'runningyoung'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/04/06/hello-world/" title="ä¸Šä¸€ç¯‡: Hello World">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="æ–‡ç« åˆ—è¡¨"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/04/01/2016-04-01-jenkins1/" title="ä¸‹ä¸€ç¯‡: iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 1)">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/04/11/2016-04-12-Phabricator2/">MACä¸‹Code Reviewå·¥å…·Phabricator + Arcanistæ­å»ºï¼ˆpart 2ï¼‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/11/2016-04-11-Phabricator1/">MACä¸‹Code Reviewå·¥å…·Phabricator + Arcanistæ­å»ºï¼ˆpart 1ï¼‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/06/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/01/2016-04-05-jenkins2/">iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/01/2016-04-01-jenkins1/">iOSæŒç»­é›†æˆï¼šjenkins+gitlab+è’²å…¬è‹±+é‚®ä»¶é€šçŸ¥(Part 1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/07/2016-03-14-Block/">Blockæºç è§£æå’Œæ·±å…¥ç†è§£</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/24/2016-03-12-read1/">ã€iOSè¯»ä¹¦ç¬”è®°ç³»åˆ—ï¼ˆä¸€ï¼‰ã€‘</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/30/2015-08-04-dependency-injection/">å…³äºIOSä¾èµ–æ³¨å…¥(DI)é‚£äº›äº‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/30/2015-07-20-ReactiveCocoa/">ReactiveCocoa å­¦ä¹ ä¹‹è·¯(å²ä¸Šæœ€å…¨æ”»ç•¥)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/30/2015-11-20-(BDD)calabashå’Œcucumber/">BDDå¼€å‘ calabash å’Œ cucumberçš„ä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/30/2015-07-08-Iterm2+ZSH-Shell/">Iterm2+ZSH æ‰“é€ ç»ˆæShell</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/30/2015-06-30-iOS-9-AppThinning/">iOS 9 App Thinning</a></li></ul>




    <script>
        
    </script>
</div>
      
<footer id="footer">
    <div class="outer">

        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 RunningYoung
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶">Hexo</a>  Theme <a href="https://github.com/RunningYoung/hexo-theme-yelee" target="_blank" title="ç®€è€Œä¸å‡ Hexo åŒæ åšå®¢ä¸»é¢˜">Yelee</a> by runningyoung
            </div>
        </div>
        
        

            <div class="visit">
              
                
              </script>
                    <span id="busuanzi_container_site_pv" style='display:none' >
                        <span id="site-visit" >æœ¬ç«™åˆ°è®¿æ•°: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none' >
                        <span id="page-visit">æœ¬é¡µé˜…è¯»é‡: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.1.22/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 12;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-64735170-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="æŸ¥çœ‹è¯„è®º"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="è½¬åˆ°åº•éƒ¨"><i class="fa fa-arrow-down"></i></a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>